<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1977px" preserveAspectRatio="none" style="width:1097px;height:1977px;background:#FFFFFF;" version="1.1" viewBox="0 0 1097 1977" width="1097px" zoomAndPan="magnify"><title>UC-28: Handle Failed Transactions</title><defs/><g><rect fill="#FFFFCC" height="28.0566" rx="2.5" ry="2.5" style="stroke:#FFDD88;stroke-width:3;" width="1086.436" x="5" y="5"/><text fill="#000000" font-family="monospace" font-size="10" lengthAdjust="spacing" textLength="354.0576" x="10" y="20">Please&#160;use&#160;'!option&#160;handwritten&#160;true'&#160;to&#160;enable&#160;handwritten</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="231.0547" x="421.6907" y="67.5898">UC-28: Handle Failed Transactions</text><g><title>Transaction</title><rect fill="#000000" fill-opacity="0.00000" height="1736.2813" width="8" x="110.5723" y="159.2754"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="114" x2="114" y1="159.2754" y2="1895.5566"/></g><g><title>API Gateway</title><rect fill="#000000" fill-opacity="0.00000" height="1736.2813" width="8" x="279.813" y="159.2754"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="282.9614" x2="282.9614" y1="159.2754" y2="1895.5566"/></g><g><title>Payment</title><rect fill="#000000" fill-opacity="0.00000" height="1736.2813" width="8" x="372.2886" y="159.2754"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="375.6646" x2="375.6646" y1="159.2754" y2="1895.5566"/></g><g><title>Notification</title><rect fill="#000000" fill-opacity="0.00000" height="1736.2813" width="8" x="571.1699" y="159.2754"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="574.5425" x2="574.5425" y1="159.2754" y2="1895.5566"/></g><g><title>FalsoPay App</title><rect fill="#000000" fill-opacity="0.00000" height="1736.2813" width="8" x="673.3765" y="159.2754"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="676.7974" x2="676.7974" y1="159.2754" y2="1895.5566"/></g><g><title>User</title><rect fill="#000000" fill-opacity="0.00000" height="1736.2813" width="8" x="917.0435" y="159.2754"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="920.2642" x2="920.2642" y1="159.2754" y2="1895.5566"/></g><g><title>Admin</title><rect fill="#000000" fill-opacity="0.00000" height="1736.2813" width="8" x="967.6641" y="159.2754"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="970.8228" x2="970.8228" y1="159.2754" y2="1895.5566"/></g><g><title>Database</title><rect fill="#000000" fill-opacity="0.00000" height="1736.2813" width="8" x="1033.4707" y="159.2754"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1036.5054" x2="1036.5054" y1="159.2754" y2="1895.5566"/></g><g class="participant participant-head" data-participant="txnService"><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="87.1445" x="71" y="109.0566"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73.1445" x="78" y="130.5898">Transaction</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46.6826" x="91.231" y="148.1992">Service</text></g><g class="participant participant-tail" data-participant="txnService"><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="87.1445" x="71" y="1894.5566"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73.1445" x="78" y="1916.0898">Transaction</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46.6826" x="91.231" y="1933.6992">Service</text></g><g class="participant participant-head" data-participant="gateway"><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95.7031" x="235.9614" y="126.666"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.7031" x="242.9614" y="148.1992">API Gateway</text></g><g class="participant participant-tail" data-participant="gateway"><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95.7031" x="235.9614" y="1894.5566"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.7031" x="242.9614" y="1916.0898">API Gateway</text></g><g class="participant participant-head" data-participant="paymentService"><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="69.248" x="341.6646" y="109.0566"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.248" x="348.6646" y="130.5898">Payment</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46.6826" x="352.9473" y="148.1992">Service</text></g><g class="participant participant-tail" data-participant="paymentService"><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="69.248" x="341.6646" y="1894.5566"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55.248" x="348.6646" y="1916.0898">Payment</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46.6826" x="352.9473" y="1933.6992">Service</text></g><g class="participant participant-head" data-participant="notifService"><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="83.2549" x="533.5425" y="109.0566"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69.2549" x="540.5425" y="130.5898">Notification</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46.6826" x="551.8286" y="148.1992">Service</text></g><g class="participant participant-tail" data-participant="notifService"><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="83.2549" x="533.5425" y="1894.5566"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69.2549" x="540.5425" y="1916.0898">Notification</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46.6826" x="551.8286" y="1933.6992">Service</text></g><g class="participant participant-head" data-participant="app"><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101.1582" x="626.7974" y="126.666"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.1582" x="633.7974" y="148.1992">FalsoPay App</text></g><g class="participant participant-tail" data-participant="app"><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101.1582" x="626.7974" y="1894.5566"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.1582" x="633.7974" y="1916.0898">FalsoPay App</text></g><g class="participant participant-head" data-participant="user"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29.5586" x="903.2642" y="156.1992">User</text><ellipse cx="921.0435" cy="90.166" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M921.0435,98.166 L921.0435,125.166 M908.0435,106.166 L934.0435,106.166 M921.0435,125.166 L908.0435,140.166 M921.0435,125.166 L934.0435,140.166" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="user"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29.5586" x="903.2642" y="1909.0898">User</text><ellipse cx="921.0435" cy="1920.666" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M921.0435,1928.666 L921.0435,1955.666 M908.0435,1936.666 L934.0435,1936.666 M921.0435,1955.666 L908.0435,1970.666 M921.0435,1955.666 L934.0435,1970.666" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="admin"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39.6826" x="948.8228" y="156.1992">Admin</text><ellipse cx="971.6641" cy="90.166" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M971.6641,98.166 L971.6641,125.166 M958.6641,106.166 L984.6641,106.166 M971.6641,125.166 L958.6641,140.166 M971.6641,125.166 L984.6641,140.166" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="admin"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39.6826" x="948.8228" y="1909.0898">Admin</text><ellipse cx="971.6641" cy="1920.666" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M971.6641,1928.666 L971.6641,1955.666 M958.6641,1936.666 L984.6641,1936.666 M971.6641,1955.666 L958.6641,1970.666 M971.6641,1955.666 L984.6641,1970.666" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="db"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59.9307" x="1004.5054" y="156.1992">Database</text><path d="M1019.4707,105.666 C1019.4707,95.666 1037.4707,95.666 1037.4707,95.666 C1037.4707,95.666 1055.4707,95.666 1055.4707,105.666 L1055.4707,131.666 C1055.4707,141.666 1037.4707,141.666 1037.4707,141.666 C1037.4707,141.666 1019.4707,141.666 1019.4707,131.666 L1019.4707,105.666" fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1019.4707,105.666 C1019.4707,115.666 1037.4707,115.666 1037.4707,115.666 C1037.4707,115.666 1055.4707,115.666 1055.4707,105.666" fill="none" style="stroke:#181818;stroke-width:1.5;"/></g><g class="participant participant-tail" data-participant="db"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59.9307" x="1004.5054" y="1909.0898">Database</text><path d="M1019.4707,1922.166 C1019.4707,1912.166 1037.4707,1912.166 1037.4707,1912.166 C1037.4707,1912.166 1055.4707,1912.166 1055.4707,1922.166 L1055.4707,1948.166 C1055.4707,1958.166 1037.4707,1958.166 1037.4707,1958.166 C1037.4707,1958.166 1019.4707,1958.166 1019.4707,1948.166 L1019.4707,1922.166" fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1019.4707,1922.166 C1019.4707,1932.166 1037.4707,1932.166 1037.4707,1932.166 C1037.4707,1932.166 1055.4707,1932.166 1055.4707,1922.166" fill="none" style="stroke:#181818;stroke-width:1.5;"/></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1075.436" x="0" y="190.4512"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1075.436" y1="190.4512" y2="190.4512"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1075.436" y1="193.4512" y2="193.4512"/><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2;" width="162.1226" x="456.6567" y="179.2754"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="144.5107" x="462.6567" y="196.7705">Main Success Scenario</text><path d="M23,218.627 L23,244.627 L204,244.627 L204,228.627 L194,218.627 L23,218.627" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M194,218.627 L194,228.627 L204,228.627 L194,218.627" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160.4243" x="29" y="237.1221">Transaction failure detected</text><g class="message" data-participant-1="txnService" data-participant-2="txnService"><line style="stroke:#181818;stroke-width:1;" x1="114.5723" x2="156.5723" y1="272.3301" y2="272.3301"/><line style="stroke:#181818;stroke-width:1;" x1="156.5723" x2="156.5723" y1="272.3301" y2="285.3301"/><line style="stroke:#181818;stroke-width:1;" x1="115.5723" x2="156.5723" y1="285.3301" y2="285.3301"/><polygon fill="#181818" points="125.5723,281.3301,115.5723,285.3301,125.5723,289.3301,121.5723,285.3301" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124.2935" x="121.5723" y="267.4736">Identify failure reason</text></g><g class="message" data-participant-1="txnService" data-participant-2="db"><polygon fill="#181818" points="1025.4707,311.6816,1035.4707,315.6816,1025.4707,319.6816,1029.4707,315.6816" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="114.5723" x2="1031.4707" y1="315.6816" y2="315.6816"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101.8989" x="525.072" y="310.8252">Log failure details</text></g><g class="message" data-participant-1="db" data-participant-2="txnService"><polygon fill="#181818" points="125.5723,342.0332,115.5723,346.0332,125.5723,350.0332,121.5723,346.0332" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="119.5723" x2="1036.4707" y1="346.0332" y2="346.0332"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82.3799" x="534.8315" y="341.1768">Log confirmed</text></g><g class="message" data-participant-1="txnService" data-participant-2="paymentService"><polygon fill="#181818" points="364.2886,372.3848,374.2886,376.3848,364.2886,380.3848,368.2886,376.3848" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="114.5723" x2="370.2886" y1="376.3848" y2="376.3848"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155.3525" x="167.7542" y="371.5283">Initiate transaction reversal</text></g><g class="message" data-participant-1="paymentService" data-participant-2="paymentService"><line style="stroke:#181818;stroke-width:1;" x1="376.2886" x2="418.2886" y1="406.7363" y2="406.7363"/><line style="stroke:#181818;stroke-width:1;" x1="418.2886" x2="418.2886" y1="406.7363" y2="419.7363"/><line style="stroke:#181818;stroke-width:1;" x1="377.2886" x2="418.2886" y1="419.7363" y2="419.7363"/><polygon fill="#181818" points="387.2886,415.7363,377.2886,419.7363,387.2886,423.7363,383.2886,419.7363" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.0171" x="383.2886" y="401.8799">Calculate reversal amount</text></g><g class="message" data-participant-1="paymentService" data-participant-2="db"><polygon fill="#181818" points="1025.4707,446.0879,1035.4707,450.0879,1025.4707,454.0879,1029.4707,450.0879" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="376.2886" x2="1031.4707" y1="450.0879" y2="450.0879"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146.7134" x="633.5229" y="445.2314">Update account balances</text></g><g class="message" data-participant-1="db" data-participant-2="paymentService"><polygon fill="#181818" points="387.2886,476.4395,377.2886,480.4395,387.2886,484.4395,383.2886,480.4395" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="381.2886" x2="1036.4707" y1="480.4395" y2="480.4395"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104.0825" x="654.8384" y="475.583">Balances updated</text></g><g class="message" data-participant-1="paymentService" data-participant-2="txnService"><polygon fill="#181818" points="125.5723,506.791,115.5723,510.791,125.5723,514.791,121.5723,510.791" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="119.5723" x2="375.2886" y1="510.791" y2="510.791"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114.8862" x="187.9873" y="505.9346">Reversal completed</text></g><g class="message" data-participant-1="txnService" data-participant-2="gateway"><polygon fill="#181818" points="271.813,537.1426,281.813,541.1426,271.813,545.1426,275.813,541.1426" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="114.5723" x2="277.813" y1="541.1426" y2="541.1426"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145.2407" x="126.5723" y="536.2861">Report transaction failure</text></g><g class="message" data-participant-1="gateway" data-participant-2="notifService"><polygon fill="#181818" points="563.1699,567.4941,573.1699,571.4941,563.1699,575.4941,567.1699,571.4941" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="283.813" x2="569.1699" y1="571.4941" y2="571.4941"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158.9834" x="349.9998" y="566.6377">Generate failure notification</text></g><g class="message" data-participant-1="notifService" data-participant-2="gateway"><polygon fill="#181818" points="294.813,597.8457,284.813,601.8457,294.813,605.8457,290.813,601.8457" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="288.813" x2="574.1699" y1="601.8457" y2="601.8457"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100.439" x="379.272" y="596.9893">Notification ready</text></g><g class="message" data-participant-1="gateway" data-participant-2="app"><polygon fill="#181818" points="665.3765,628.1973,675.3765,632.1973,665.3765,636.1973,669.3765,632.1973" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="283.813" x2="671.3765" y1="632.1973" y2="632.1973"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.1416" x="413.0239" y="627.3408">Send failure notification</text></g><g class="message" data-participant-1="app" data-participant-2="user"><polygon fill="#181818" points="909.0435,658.5488,919.0435,662.5488,909.0435,666.5488,913.0435,662.5488" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="677.3765" x2="915.0435" y1="662.5488" y2="662.5488"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214.6079" x="691.906" y="657.6924">Display transaction failure notification</text></g><g class="message" data-participant-1="app" data-participant-2="user"><polygon fill="#181818" points="909.0435,688.9004,919.0435,692.9004,909.0435,696.9004,913.0435,692.9004" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="677.3765" x2="915.0435" y1="692.9004" y2="692.9004"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156.7871" x="720.8164" y="688.0439">Show reversal confirmation</text></g><g class="message" data-participant-1="txnService" data-participant-2="db"><polygon fill="#181818" points="1025.4707,719.252,1035.4707,723.252,1025.4707,727.252,1029.4707,723.252" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="114.5723" x2="1031.4707" y1="723.252" y2="723.252"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132.939" x="509.552" y="718.3955">Create recovery record</text></g><g class="message" data-participant-1="db" data-participant-2="txnService"><polygon fill="#181818" points="125.5723,749.6035,115.5723,753.6035,125.5723,757.6035,121.5723,753.6035" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="119.5723" x2="1036.4707" y1="753.6035" y2="753.6035"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142.3398" x="504.8516" y="748.7471">Recovery record created</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1075.436" x="0" y="782.7793"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1075.436" y1="782.7793" y2="782.7793"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1075.436" y1="785.7793" y2="785.7793"/><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2;" width="241.5762" x="416.9299" y="771.6035"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="223.9644" x="422.9299" y="789.0986">Alternative Scenario: Critical Failure</text><path d="M5,810.9551 L5,836.9551 L225,836.9551 L225,820.9551 L215,810.9551 L5,810.9551" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M215,810.9551 L215,820.9551 L225,820.9551 L215,810.9551" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199.4307" x="11" y="829.4502">Critical transaction failure detected</text><g class="message" data-participant-1="txnService" data-participant-2="txnService"><line style="stroke:#181818;stroke-width:1;" x1="114.5723" x2="156.5723" y1="864.6582" y2="864.6582"/><line style="stroke:#181818;stroke-width:1;" x1="156.5723" x2="156.5723" y1="864.6582" y2="877.6582"/><line style="stroke:#181818;stroke-width:1;" x1="115.5723" x2="156.5723" y1="877.6582" y2="877.6582"/><polygon fill="#181818" points="125.5723,873.6582,115.5723,877.6582,125.5723,881.6582,121.5723,877.6582" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121.3799" x="121.5723" y="859.8018">Identify critical failure</text></g><g class="message" data-participant-1="txnService" data-participant-2="db"><polygon fill="#181818" points="1025.4707,904.0098,1035.4707,908.0098,1025.4707,912.0098,1029.4707,908.0098" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="114.5723" x2="1031.4707" y1="908.0098" y2="908.0098"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101.1563" x="525.4434" y="903.1533">Log critical failure</text></g><g class="message" data-participant-1="db" data-participant-2="txnService"><polygon fill="#181818" points="125.5723,934.3613,115.5723,938.3613,125.5723,942.3613,121.5723,938.3613" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="119.5723" x2="1036.4707" y1="938.3613" y2="938.3613"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82.3799" x="534.8315" y="933.5049">Log confirmed</text></g><g class="message" data-participant-1="txnService" data-participant-2="gateway"><polygon fill="#181818" points="271.813,964.7129,281.813,968.7129,271.813,972.7129,275.813,968.7129" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="114.5723" x2="277.813" y1="968.7129" y2="968.7129"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.2681" x="143.5586" y="963.8564">Alert administration</text></g><g class="message" data-participant-1="gateway" data-participant-2="admin"><polygon fill="#181818" points="959.6641,995.0645,969.6641,999.0645,959.6641,1003.0645,963.6641,999.0645" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="283.813" x2="965.6641" y1="999.0645" y2="999.0645"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.728" x="558.3745" y="994.208">Send critical failure alert</text></g><g class="message" data-participant-1="txnService" data-participant-2="paymentService"><polygon fill="#181818" points="364.2886,1025.416,374.2886,1029.416,364.2886,1033.416,368.2886,1029.416" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="114.5723" x2="370.2886" y1="1029.416" y2="1029.416"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161.8462" x="164.5073" y="1024.5596">Attempt transaction reversal</text></g><g class="message" data-participant-1="paymentService" data-participant-2="paymentService"><line style="stroke:#181818;stroke-width:1;" x1="376.2886" x2="418.2886" y1="1059.7676" y2="1059.7676"/><line style="stroke:#181818;stroke-width:1;" x1="418.2886" x2="418.2886" y1="1059.7676" y2="1072.7676"/><line style="stroke:#181818;stroke-width:1;" x1="377.2886" x2="418.2886" y1="1072.7676" y2="1072.7676"/><polygon fill="#181818" points="387.2886,1068.7676,377.2886,1072.7676,387.2886,1076.7676,383.2886,1072.7676" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.0171" x="383.2886" y="1054.9111">Calculate reversal amount</text></g><g class="message" data-participant-1="paymentService" data-participant-2="db"><polygon fill="#181818" points="1025.4707,1099.1191,1035.4707,1103.1191,1025.4707,1107.1191,1029.4707,1103.1191" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="376.2886" x2="1031.4707" y1="1103.1191" y2="1103.1191"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146.7134" x="633.5229" y="1098.2627">Update account balances</text></g><g class="message" data-participant-1="db" data-participant-2="paymentService"><polygon fill="#181818" points="387.2886,1129.4707,377.2886,1133.4707,387.2886,1137.4707,383.2886,1133.4707" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="381.2886" x2="1036.4707" y1="1133.4707" y2="1133.4707"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104.0825" x="654.8384" y="1128.6143">Balances updated</text></g><g class="message" data-participant-1="paymentService" data-participant-2="txnService"><polygon fill="#181818" points="125.5723,1159.8223,115.5723,1163.8223,125.5723,1167.8223,121.5723,1163.8223" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="119.5723" x2="375.2886" y1="1163.8223" y2="1163.8223"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114.8862" x="187.9873" y="1158.9658">Reversal completed</text></g><g class="message" data-participant-1="txnService" data-participant-2="gateway"><polygon fill="#181818" points="271.813,1190.1738,281.813,1194.1738,271.813,1198.1738,275.813,1194.1738" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="114.5723" x2="277.813" y1="1194.1738" y2="1194.1738"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145.2407" x="126.5723" y="1189.3174">Report transaction failure</text></g><g class="message" data-participant-1="gateway" data-participant-2="notifService"><polygon fill="#181818" points="563.1699,1220.5254,573.1699,1224.5254,563.1699,1228.5254,567.1699,1224.5254" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="283.813" x2="569.1699" y1="1224.5254" y2="1224.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158.9834" x="349.9998" y="1219.6689">Generate failure notification</text></g><g class="message" data-participant-1="notifService" data-participant-2="gateway"><polygon fill="#181818" points="294.813,1250.877,284.813,1254.877,294.813,1258.877,290.813,1254.877" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="288.813" x2="574.1699" y1="1254.877" y2="1254.877"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100.439" x="379.272" y="1250.0205">Notification ready</text></g><g class="message" data-participant-1="gateway" data-participant-2="app"><polygon fill="#181818" points="665.3765,1281.2285,675.3765,1285.2285,665.3765,1289.2285,669.3765,1285.2285" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="283.813" x2="671.3765" y1="1285.2285" y2="1285.2285"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.1416" x="413.0239" y="1280.3721">Send failure notification</text></g><g class="message" data-participant-1="app" data-participant-2="user"><polygon fill="#181818" points="909.0435,1311.5801,919.0435,1315.5801,909.0435,1319.5801,913.0435,1315.5801" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="677.3765" x2="915.0435" y1="1315.5801" y2="1315.5801"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214.6079" x="691.906" y="1310.7236">Display transaction failure notification</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1075.436" x="0" y="1344.7559"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1075.436" y1="1344.7559" y2="1344.7559"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1075.436" y1="1347.7559" y2="1347.7559"/><rect fill="#EEEEEE" height="24.3516" style="stroke:#000000;stroke-width:2;" width="292.1543" x="391.6409" y="1333.5801"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="274.5425" x="397.6409" y="1351.0752">Alternative Scenario: Recovery Not Possible</text><path d="M23,1372.9316 L23,1398.9316 L204,1398.9316 L204,1382.9316 L194,1372.9316 L23,1372.9316" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M194,1372.9316 L194,1382.9316 L204,1382.9316 L194,1372.9316" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160.4243" x="29" y="1391.4268">Transaction failure detected</text><g class="message" data-participant-1="txnService" data-participant-2="txnService"><line style="stroke:#181818;stroke-width:1;" x1="114.5723" x2="156.5723" y1="1426.6348" y2="1426.6348"/><line style="stroke:#181818;stroke-width:1;" x1="156.5723" x2="156.5723" y1="1426.6348" y2="1439.6348"/><line style="stroke:#181818;stroke-width:1;" x1="115.5723" x2="156.5723" y1="1439.6348" y2="1439.6348"/><polygon fill="#181818" points="125.5723,1435.6348,115.5723,1439.6348,125.5723,1443.6348,121.5723,1439.6348" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124.2935" x="121.5723" y="1421.7783">Identify failure reason</text></g><g class="message" data-participant-1="txnService" data-participant-2="db"><polygon fill="#181818" points="1025.4707,1465.9863,1035.4707,1469.9863,1025.4707,1473.9863,1029.4707,1469.9863" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="114.5723" x2="1031.4707" y1="1469.9863" y2="1469.9863"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101.8989" x="525.072" y="1465.1299">Log failure details</text></g><g class="message" data-participant-1="db" data-participant-2="txnService"><polygon fill="#181818" points="125.5723,1496.3379,115.5723,1500.3379,125.5723,1504.3379,121.5723,1500.3379" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="119.5723" x2="1036.4707" y1="1500.3379" y2="1500.3379"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82.3799" x="534.8315" y="1495.4814">Log confirmed</text></g><g class="message" data-participant-1="txnService" data-participant-2="paymentService"><polygon fill="#181818" points="364.2886,1526.6895,374.2886,1530.6895,364.2886,1534.6895,368.2886,1530.6895" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="114.5723" x2="370.2886" y1="1530.6895" y2="1530.6895"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161.8462" x="164.5073" y="1525.833">Attempt transaction reversal</text></g><g class="message" data-participant-1="paymentService" data-participant-2="paymentService"><line style="stroke:#181818;stroke-width:1;" x1="376.2886" x2="418.2886" y1="1561.041" y2="1561.041"/><line style="stroke:#181818;stroke-width:1;" x1="418.2886" x2="418.2886" y1="1561.041" y2="1574.041"/><line style="stroke:#181818;stroke-width:1;" x1="377.2886" x2="418.2886" y1="1574.041" y2="1574.041"/><polygon fill="#181818" points="387.2886,1570.041,377.2886,1574.041,387.2886,1578.041,383.2886,1574.041" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124.2871" x="383.2886" y="1556.1846">Reversal not possible</text></g><g class="message" data-participant-1="paymentService" data-participant-2="txnService"><polygon fill="#181818" points="125.5723,1600.3926,115.5723,1604.3926,125.5723,1608.3926,121.5723,1604.3926" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="119.5723" x2="375.2886" y1="1604.3926" y2="1604.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85.9854" x="202.4377" y="1599.5361">Reversal failed</text></g><g class="message" data-participant-1="txnService" data-participant-2="gateway"><polygon fill="#181818" points="271.813,1630.7441,281.813,1634.7441,271.813,1638.7441,275.813,1634.7441" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="114.5723" x2="277.813" y1="1634.7441" y2="1634.7441"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119.9453" x="139.22" y="1629.8877">Create support ticket</text></g><g class="message" data-participant-1="gateway" data-participant-2="db"><polygon fill="#181818" points="1025.4707,1661.0957,1035.4707,1665.0957,1025.4707,1669.0957,1029.4707,1665.0957" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="283.813" x2="1031.4707" y1="1665.0957" y2="1665.0957"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.998" x="604.6428" y="1660.2393">Store support ticket</text></g><g class="message" data-participant-1="db" data-participant-2="gateway"><polygon fill="#181818" points="294.813,1691.4473,284.813,1695.4473,294.813,1699.4473,290.813,1695.4473" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="288.813" x2="1036.4707" y1="1695.4473" y2="1695.4473"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74.4136" x="623.4351" y="1690.5908">Ticket stored</text></g><g class="message" data-participant-1="txnService" data-participant-2="gateway"><polygon fill="#181818" points="271.813,1721.7988,281.813,1725.7988,271.813,1729.7988,275.813,1725.7988" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="114.5723" x2="277.813" y1="1725.7988" y2="1725.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145.2407" x="126.5723" y="1720.9424">Report transaction failure</text></g><g class="message" data-participant-1="gateway" data-participant-2="notifService"><polygon fill="#181818" points="563.1699,1752.1504,573.1699,1756.1504,563.1699,1760.1504,567.1699,1756.1504" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="283.813" x2="569.1699" y1="1756.1504" y2="1756.1504"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="267.3569" x="295.813" y="1751.2939">Generate failure notification with ticket number</text></g><g class="message" data-participant-1="notifService" data-participant-2="gateway"><polygon fill="#181818" points="294.813,1782.502,284.813,1786.502,294.813,1790.502,290.813,1786.502" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="288.813" x2="574.1699" y1="1786.502" y2="1786.502"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100.439" x="379.272" y="1781.6455">Notification ready</text></g><g class="message" data-participant-1="gateway" data-participant-2="app"><polygon fill="#181818" points="665.3765,1812.8535,675.3765,1816.8535,665.3765,1820.8535,669.3765,1816.8535" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="283.813" x2="671.3765" y1="1816.8535" y2="1816.8535"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.1416" x="413.0239" y="1811.9971">Send failure notification</text></g><g class="message" data-participant-1="app" data-participant-2="user"><polygon fill="#181818" points="909.0435,1843.2051,919.0435,1847.2051,909.0435,1851.2051,913.0435,1847.2051" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="677.3765" x2="915.0435" y1="1847.2051" y2="1847.2051"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214.6079" x="691.906" y="1842.3486">Display transaction failure notification</text></g><g class="message" data-participant-1="app" data-participant-2="user"><polygon fill="#181818" points="909.0435,1873.5566,919.0435,1877.5566,909.0435,1881.5566,913.0435,1877.5566" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="677.3765" x2="915.0435" y1="1877.5566" y2="1877.5566"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219.667" x="689.3765" y="1872.7002">Show support ticket reference number</text></g><!--SRC=[xLR1Rjim3BthAuZSUzbf2901Nefs1TQXQDhRBhJ4949aIPFaPFdxKOxjsOcBRIWm3CLkilX8FPAFik9EMuy1AuZqhIOhwPvYn0qLHcyiIBA9WeWzgaIvsmHNMxLqnWKuR7MYWNsBLXs2JeaihD544YBfP0XcpykhT-_dy8a1_7c3sf22fu0seapQsJWJWcCaBRL7cs0si7srAmfxBMa6625zxpx73iN37TnYeWCU6zpcj1w37l1OSLBZYFwqEHdrYqjwhILUyh3PCkbpmvaxFWaAxnieUYyu5IxOx3bIQFPgNdIRXQgqFI7pIYXCM6BaibstgyQeIY4M2xX7RM5LIycjWXNt28Dsi5W8mPG8t9x2e4ZpOPMvAThKWK1H8fb8SNzw95nz6FdTAIwANXzxfq0OdJtpKEKSFhlDC3Aleb0bN9q5p33fx5g7wlBaSHFuTAkJvXP26j0FnCb5D6ACdl9Vef6roG4w9y2AbPicV7CEprvbC4gPGQnqWpmEVHxduJ-sTgWRFtKHzIptnuw4T9KtD57wLgyPwbr8expRueeMa-53-StXbYo5pBzhWnteLWonewE6wixjLSVX4IpREQp8gkceWkqPbfKyXsiTlM6_2TfZjv7NQkiEFnlKYgCDVwcp9LDi6Ygpo8_D8gWfgJsE8I0RJzNCJs7uKhDyo9xwyScnMM-IIToqf5yUg1wQNZjPielKDNXwjYvWVpfSVSCBGoojvfRHaUatbHwsF5lQff-V2fYTVpMt1L_-bK__n_QDZUtBazFF6jE21nUZBWszkV_HAtNT2ubh0hujqc-hRzsybrwKNdilnjgV9AZbZj9G4haeAtvgN63QglIHdffjY1dx5wKE1vssBIUmTLNos-WV_scD2yayrXJo0xgZ_mC0]--></g></svg>